# Workflow
[1. ë°ì´í„° ìˆ˜ì§‘] â†’ [2. ì˜¤ì°¨ ë¶„ì„] â†’ [3. í”„ë¡¬í”„íŠ¸ ê°œì„ ] â†’ [4. ì¬ì¶”ì •] â†’ [5. ë¹„êµ í‰ê°€] â†’ (ë°˜ë³µ)

## ë³€ìˆ˜ ì •ì˜

| ë³€ìˆ˜ | ê°’ | ì„¤ëª… |
|------|-----|------|
| `${ANALYSIS_DIR}` | `.local/01_dataset_proper_error_analysis` | í˜„ì¬ ë¶„ì„ ê²°ê³¼ ë””ë ‰í† ë¦¬ |
| `${DATASET}` | `inputs/dataset_proper.tsv` | ë¶„ì„ ëŒ€ìƒ ë°ì´í„°ì…‹ (8,879ê±´) |
| `${CATEGORIES_DIR}` | `inputs/categories` | ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¦¬ ë°ì´í„°ì…‹ |

---

# 1ë‹¨ê³„: ë°ì´í„° ìˆ˜ì§‘

| íŒŒì¼  | ì„¤ëª…  | ìƒíƒœ  |
|------|------|------|
| `bigquery/dataset.sql` | ì „ì„ì ì œê³µ ì¿¼ë¦¬ (ì°¸ê³ ìš©) | âœ… ì™„ë£Œ |
| `colab/04_full_dataset_extraction.ipynb` | ì‹¤ì œ ë°ì´í„° ì¶”ì¶œ ë…¸íŠ¸ë¶ | âœ… ì™„ë£Œ |
| `inputs/datasource.tsv` | ì¶”ì¶œëœ ì „ì²´ ë°ì´í„°ì…‹ (**10,185ê±´**) | âœ… ì™„ë£Œ |
| `${DATASET}` | ì¤‘ë³µ/ë°˜ë³µ êµ¬ë§¤ ì œì™¸ (**8,879ê±´**) | âœ… ì™„ë£Œ |

* datasource.tsv: 113,690
  * product_info_details ì¤„ë°”ê¿ˆ: 4,599 ê±´
* (ì´ë¯¸ì§€ ê¸°ì¤€) ìœ ë‹ˆí¬ ìƒí’ˆ: 8,878ê±´
* ì¤‘ë³µ ì´ë¯¸ì§€: 1,307 ê±´
  * 2íšŒ: 314
  * 3íšŒ+: 173
  * ìµœëŒ€: 55

# 2ë‹¨ê³„: ì˜¤ì°¨ ë¶„ì„

| íŒŒì¼ | ì„¤ëª… | ìƒíƒœ |
|------|------|------|
| `scripts/error_distribution.py` | ì˜¤ì°¨ êµ¬ê°„ë³„ ë¶„í¬ ì‹œê°í™” | âœ… ì™„ë£Œ |
| `scripts/error_top_items.py` | ì¹´í…Œê³ ë¦¬ë³„ ì˜¤ì°¨ TOP N í•­ëª© ì¶”ì¶œ | âœ… ì™„ë£Œ |
| `scripts/duplicate_variability.py` | ë™ì¼ ìƒí’ˆ ì‹¤ì¸¡ í¸ì°¨ ë¶„ì„ | âœ… ì™„ë£Œ |
| `scripts/category_pattern_analysis.py` | ì¹´í…Œê³ ë¦¬ë³„ ì˜¤ì°¨ íŒ¨í„´ ë¶„ì„ | âœ… ì™„ë£Œ |
| `scripts/extract_error_samples.py` | ì˜¤ì°¨ ìƒìœ„ Nê°œ ì´ë¯¸ì§€ ì¶”ì¶œ | âœ… ì™„ë£Œ |
| `${CATEGORIES_DIR}/*.tsv` | ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¦¬ ë°ì´í„°ì…‹ (10ê°œ) | âœ… ì™„ë£Œ |
| `${ANALYSIS_DIR}/error_analysis_summary.md` | ë¶„ì„ ê²°ê³¼ ì¢…í•© ë¦¬í¬íŠ¸ | âœ… ì™„ë£Œ |

**2ë‹¨ê³„ ì‚°ì¶œë¬¼**: ì–´ë–¤ ì¹´í…Œê³ ë¦¬ê°€, ì–´ë–¤ ë°©í–¥ìœ¼ë¡œ, ì–¼ë§ˆë‚˜ í‹€ë¦¬ëŠ”ì§€ íŒŒì•…

# 3ë‹¨ê³„: í”„ë¡¬í”„íŠ¸ ê°œì„ 

| íŒŒì¼ | ì„¤ëª… | ìƒíƒœ |
|------|------|------|
| `prompts/weight-volume.system.txt` | ê¸°ì¡´ í”„ë¡¬í”„íŠ¸ (OpenAIìš©) | âœ… ê¸°ì¡´ |
| `prompts/weight-volume.v2.system.txt` | ê°œì„  í”„ë¡¬í”„íŠ¸ v2 | âœ… ì™„ë£Œ |
| `prompts/weight-volume.v3.system.txt` | ì¶”ê°€ ê°œì„  ë²„ì „ *(í•„ìš”ì‹œ)* | ğŸ“‹ TODO |

**3ë‹¨ê³„ ì‚°ì¶œë¬¼**: ì˜¤ì°¨ íŒ¨í„´ì„ ë°˜ì˜í•œ ìƒˆ í”„ë¡¬í”„íŠ¸

# 4ë‹¨ê³„: ì¬ì¶”ì • (ìƒˆ í”„ë¡¬í”„íŠ¸ë¡œ AI í˜¸ì¶œ)

| íŒŒì¼ | ì„¤ëª… | ìƒíƒœ |
|------|------|------|
| `scripts/weight_volume.py` | OpenAI ì¶”ì • ìŠ¤í¬ë¦½íŠ¸ (ê¸°ì¡´) | âœ… ê¸°ì¡´ |
| `scripts/weight_volume_gemini.py` | Gemini ì¶”ì • ìŠ¤í¬ë¦½íŠ¸ | âœ… ì™„ë£Œ |
| `scripts/weight_volume_newprompt.py` | ìƒˆ í”„ë¡¬í”„íŠ¸ë¡œ ë°°ì¹˜ ì¬ì¶”ì • (resume ì§€ì›) | âœ… ì™„ë£Œ |
| `inputs/datasource_complete.tsv` | ì¬ì¶”ì • ì…ë ¥ ë°ì´í„° (5,585ê±´) | âœ… ì™„ë£Œ |

**ì‹¤í–‰ ì˜ˆì‹œ:**
```bash
# ì „ì²´ ì‹¤í–‰ (500ê±´ì”©, resume ê°€ëŠ¥)
uv run python scripts/weight_volume_newprompt.py \
    -i inputs/datasource_complete.tsv \
    -p weight-volume.v2.system.txt \
    -o .local/prompt_results/weight-volume.v2.system/datasource_complete/result.tsv \
    -l 500 \
    --resume
```

**4ë‹¨ê³„ ì‚°ì¶œë¬¼**: `result.tsv` (ìƒˆ í”„ë¡¬í”„íŠ¸ë¡œ ì¶”ì •í•œ ê²°ê³¼)

# 5ë‹¨ê³„: ë¹„êµ í‰ê°€

| íŒŒì¼ | ì„¤ëª… | ìƒíƒœ |
|------|------|------|
| `scripts/merge_results.py` | ê¸°ì¡´ ì¶”ì •+ì‹¤ì¸¡ê³¼ ì‹ ê·œ ì¶”ì • ì¡°ì¸ | âœ… ì™„ë£Œ |
| `scripts/compare_prompts.py` | ë¹„êµ ê²°ê³¼ ì‹œê°í™” (ê·¸ë˜í”„, í†µê³„) | âœ… ì™„ë£Œ |

**ì‹¤í–‰ ì˜ˆì‹œ:**
```bash
# 1. ê²°ê³¼ ë³‘í•©
uv run python scripts/merge_results.py \
    -d inputs/datasource_complete.tsv \
    -r .local/prompt_results/weight-volume.v2.system/datasource_complete/result.tsv

# 2. ì‹œê°í™”
uv run python scripts/compare_prompts.py \
    -i .local/prompt_results/weight-volume.v2.system/datasource_complete/comparison.tsv
```

**5ë‹¨ê³„ ì‚°ì¶œë¬¼**: `comparison.tsv`, `comparison.png`, `stats.md`

---

### ë°˜ë³µ ì‚¬ì´í´

```
ë¶„ì„ ê²°ê³¼ â†’ í”„ë¡¬í”„íŠ¸ ìˆ˜ì • â†’ ì¬ì¶”ì • â†’ í‰ê°€ â†’ (ê°œì„ ë  ë•Œê¹Œì§€ ë°˜ë³µ)
     â†‘                                    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í˜„ì¬ ìœ„ì¹˜

```
[1. ë°ì´í„° ìˆ˜ì§‘] âœ…
       â†“
[2. ì˜¤ì°¨ ë¶„ì„] âœ… ì™„ë£Œ
       â†“
[3. í”„ë¡¬í”„íŠ¸ ê°œì„ ] âœ… v2 ì‘ì„± ì™„ë£Œ
       â†“
[4. ì¬ì¶”ì •] â† ì—¬ê¸°ì„œ ì§„í–‰ í•„ìš”
       â†“
[5. ë¹„êµ í‰ê°€]
```

---

## ë¶„ì„ íˆìŠ¤í† ë¦¬

### 2026-02-02: dataset_proper ë¶„ì„

**ë°ì´í„°ì…‹**: `inputs/dataset_proper.tsv` (8,879ê±´, ì¤‘ë³µ/ë°˜ë³µ êµ¬ë§¤ ì œì™¸)

**ë¶„ì„ ê²°ê³¼ ìœ„ì¹˜**: `.local/01_dataset_proper_error_analysis/`

**ì£¼ìš” ë°œê²¬**:
1. **ê³¼ëŒ€ì¶”ì • íŒ¨í„´**: í”¼ê·œì–´/ì¸í˜•ë¥˜ì—ì„œ 300g ê³ ì • ì¶”ì • â†’ ì‹¤ì œ 65~200gì¸ ì†Œí˜• ìƒí’ˆì— ê³¼ëŒ€
2. **ê³¼ì†Œì¶”ì • íŒ¨í„´**: ì„¸íŠ¸/ëŒ€ìš©ëŸ‰ ìƒí’ˆì„ ë‹¨í’ˆìœ¼ë¡œ ì¸ì‹ (í™”ì¥í’ˆ, ì‹œë¦¬ì–¼, ë³¼ë§ê°€ë°©)
3. **AI ê³ ì •ê°’ ë¬¸ì œ**: 20g, 30g, 100g, 300g, 800g ë“± íŠ¹ì • ê°’ì— ê³ ì •ë˜ëŠ” ê²½í–¥

**í•µì‹¬ ì¸ì‚¬ì´íŠ¸**:
- AI ê³¼ì†Œì¶”ì • ì‹¬ê°: ë¶€í”¼ -78%, ì¹˜ìˆ˜ -40%
- ì¹´í…Œê³ ë¦¬ë³„ í¸ì°¨: ì¸í˜•/í”¼ê·œì–´ëŠ” ê³¼ëŒ€ì¶”ì •, í™”ì¥í’ˆ/ì‹í’ˆì€ ê³¼ì†Œì¶”ì •
- ì‹¤ì¸¡ì¹˜ ë³€ë™ì„±: ê°™ì€ ìƒí’ˆë„ ë°°ì†¡ë§ˆë‹¤ 2~10ë°° ì°¨ì´ ê°€ëŠ¥
